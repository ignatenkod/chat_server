# üöÄ Async WebSocket Chat Server

**–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π —á–∞—Ç-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º asyncio –∏ WebSockets**  
–ë–µ–∑ –ª–∏—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚Äî —Ç–æ–ª—å–∫–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å, –∫–æ–º–Ω–∞—Ç—ã –∏ SQLite –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏.

---

## üî• –§–∏—á–∏

- **WebSocket-—Å–µ—Ä–≤–µ—Ä** –Ω–∞ `asyncio` + `websockets`
- **–ö–æ–º–Ω–∞—Ç—ã** —Å broadcast-—Ä–∞—Å—Å—ã–ª–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏** –≤ SQLite —á–µ—Ä–µ–∑ `aiosqlite`
- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ middleware** (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- **Alpine Docker-–æ–±—Ä–∞–∑** (<50MB)
- –°–≤–æ—è —Å–∏—Å—Ç–µ–º–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (JSON-based)

---

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
git clone https://github.com/–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.git
cd chat-server
pip install -r requirements.txt
python -m app.core.server
```

### Docker
```bash
docker build -t chat-server .
docker run -p 8000:8000 chat-server
```

---

## üì° API-—Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π

**–í—Ö–æ–¥ –≤ –∫–æ–º–Ω–∞—Ç—É:**
```json
{"action": "join", "room": "general"}
```

**–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```json
{"action": "message", "room": "general", "text": "–ü—Ä–∏–≤–µ—Ç!"}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ß–µ—Ä–µ–∑ `websocat`**:
   ```bash
   websocat ws://localhost:8000
   ```

2. **Python-–∫–ª–∏–µ–Ω—Ç**:
   ```python
   import asyncio, websockets
   async def test_client():
       async with websockets.connect("ws://localhost:8000") as ws:
           await ws.send('{"action": "join", "room": "test"}')
           await ws.send('{"action": "message", "room": "test", "text": "Hi"}')
   asyncio.run(test_client())
   ```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
chat-server/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ core/          # –Ø–¥—Ä–æ —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ rooms/         # –õ–æ–≥–∏–∫–∞ –∫–æ–º–Ω–∞—Ç
‚îÇ   ‚îú‚îÄ‚îÄ storage/       # SQLite-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ config.py      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ Dockerfile         # Alpine-–æ–±—Ä–∞–∑
‚îî‚îÄ‚îÄ requirements.txt   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç
- –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É `game-lobby` –∏ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π.

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î:
  ```bash
  sqlite3 chat.db "SELECT * FROM messages;"
  ```

---

## üöÄ –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞

- [ ] –î–æ–±–∞–≤–∏—Ç—å JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
- [ ] REST API –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ‚Äî —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞.

---

> **–ê–≤—Ç–æ—Ä**: –î–∏–∞–Ω–∞ 
> **–í–µ—Ä—Å–∏—è**: 1.0.0  
> **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Python 3.10+, asyncio, WebSockets, SQLite
```
